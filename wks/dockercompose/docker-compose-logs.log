root@ip-172-31-29-246:/dev/david/kt/limaconf/wks/dockercompose# docker-compose logs
Attaching to dockercompose_registrator_1, dockercompose_lb_1, dockercompose_consul_1, dockercompose_app_1
registrator_1 | 2016/03/31 06:29:20 Starting registrator v6 ...
registrator_1 | 2016/03/31 06:29:20 consul: current leader
registrator_1 | 2016/03/31 06:29:20 Using consul adapter: consul://consul:8500
registrator_1 | 2016/03/31 06:29:20 Listening for Docker events ...
registrator_1 | 2016/03/31 06:29:20 Syncing services on 4 containers
registrator_1 | 2016/03/31 06:29:20 ignored: 1d625209f296 no published ports
registrator_1 | 2016/03/31 06:29:20 added: f92f739026d6 1d625209f296:dockercompose_lb_1:80
registrator_1 | 2016/03/31 06:29:20 ignored: f92f739026d6 port 443 not published on host
registrator_1 | 2016/03/31 06:29:20 ignored: 9a152395d7b5 port 53 not published on host
registrator_1 | 2016/03/31 06:29:20 ignored: 9a152395d7b5 port 8301 not published on host
registrator_1 | 2016/03/31 06:29:20 ignored: 9a152395d7b5 port 8302 not published on host
registrator_1 | 2016/03/31 06:29:20 added: 9a152395d7b5 1d625209f296:dockercompose_consul_1:53:udp
registrator_1 | 2016/03/31 06:29:20 added: 9a152395d7b5 1d625209f296:dockercompose_consul_1:8400
registrator_1 | 2016/03/31 06:29:20 added: 9a152395d7b5 1d625209f296:dockercompose_consul_1:8500
registrator_1 | 2016/03/31 06:29:20 ignored: 9a152395d7b5 port 8302 not published on host
registrator_1 | 2016/03/31 06:29:20 ignored: 9a152395d7b5 port 8301 not published on host
registrator_1 | 2016/03/31 06:29:20 added: 9a152395d7b5 1d625209f296:dockercompose_consul_1:8300
registrator_1 | 2016/03/31 06:29:20 added: d3de3a2bab2e 1d625209f296:dockercompose_app_1:8003
lb_1          | 2016/03/31 06:29:20 [ERR] (service "production.app") Unexpected response code: 500 (No cluster leader)
lb_1          | 2016/03/31 06:29:20 [ERR] Unexpected response code: 500 (No cluster leader)
lb_1          | nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
lb_1          | nginx: configuration file /etc/nginx/nginx.conf test is successful
lb_1          | 2016/03/31 06:29:21 [ERR] (service "production.app") Unexpected response code: 500 (No cluster leader)
lb_1          | 2016/03/31 06:29:21 [ERR] Unexpected response code: 500 (No cluster leader)
consul_1      | ==> WARNING: Bootstrap mode enabled! Do not enable unless necessary
consul_1      | ==> WARNING: It is highly recommended to set GOMAXPROCS higher than 1
consul_1      | ==> Starting raft data migration...
consul_1      | ==> Starting Consul agent...
consul_1      | ==> Starting Consul agent RPC...
consul_1      | ==> Consul agent running!
consul_1      |          Node name: '9a152395d7b5'
consul_1      |         Datacenter: 'dc1'
consul_1      |             Server: true (bootstrap: true)
consul_1      |        Client Addr: 0.0.0.0 (HTTP: 8500, HTTPS: -1, DNS: 53, RPC: 8400)
consul_1      |       Cluster Addr: 192.168.1.14 (LAN: 8301, WAN: 8302)
consul_1      |     Gossip encrypt: false, RPC-TLS: false, TLS-Incoming: false
consul_1      |              Atlas: <disabled>
consul_1      |
consul_1      | ==> Log data will now stream in as it occurs:
consul_1      |
consul_1      |     2016/03/31 06:29:20 [INFO] serf: EventMemberJoin: 9a152395d7b5 192.168.1.14
consul_1      |     2016/03/31 06:29:20 [INFO] serf: EventMemberJoin: 9a152395d7b5.dc1 192.168.1.14
consul_1      |     2016/03/31 06:29:20 [INFO] raft: Node at 192.168.1.14:8300 [Follower] entering Follower state
consul_1      |     2016/03/31 06:29:20 [INFO] consul: adding server 9a152395d7b5 (Addr: 192.168.1.14:8300) (DC: dc1)
consul_1      |     2016/03/31 06:29:20 [INFO] consul: adding server 9a152395d7b5.dc1 (Addr: 192.168.1.14:8300) (DC: dc1)
consul_1      |     2016/03/31 06:29:20 [ERR] agent: failed to sync remote state: No cluster leader
consul_1      |     2016/03/31 06:29:20 [ERR] http: Request /v1/health/service/app?passing=1&tag=production&wait=60000ms, error: No cluster leader
consul_1      |     2016/03/31 06:29:20 [WARN] Service name "dockercompose_lb-80" will not be discoverable via DNS due to invalid characters. Valid characters include all alpha-numerics and dashes.
consul_1      |     2016/03/31 06:29:20 [ERR] agent: failed to sync changes: No cluster leader
consul_1      |     2016/03/31 06:29:20 [ERR] agent: failed to sync changes: No cluster leader
consul_1      |     2016/03/31 06:29:20 [ERR] agent: failed to sync changes: No cluster leader
consul_1      |     2016/03/31 06:29:20 [ERR] agent: failed to sync changes: No cluster leader
consul_1      |     2016/03/31 06:29:20 [ERR] agent: failed to sync changes: No cluster leader
consul_1      |     2016/03/31 06:29:20 [ERR] agent: failed to sync changes: No cluster leader
consul_1      |     2016/03/31 06:29:21 [ERR] http: Request /v1/health/service/app?passing=1&tag=production&wait=60000ms, error: No cluster leader
consul_1      |     2016/03/31 06:29:22 [WARN] raft: Heartbeat timeout reached, starting election
consul_1      |     2016/03/31 06:29:22 [INFO] raft: Node at 192.168.1.14:8300 [Candidate] entering Candidate state
consul_1      |     2016/03/31 06:29:22 [INFO] raft: Election won. Tally: 1
consul_1      |     2016/03/31 06:29:22 [INFO] raft: Node at 192.168.1.14:8300 [Leader] entering Leader state
consul_1      |     2016/03/31 06:29:22 [INFO] consul: cluster leadership acquired
consul_1      |     2016/03/31 06:29:22 [INFO] consul: New leader elected: 9a152395d7b5
consul_1      |     2016/03/31 06:29:22 [INFO] raft: Disabling EnableSingleNode (bootstrap)
consul_1      |     2016/03/31 06:29:22 [INFO] consul: member '9a152395d7b5' joined, marking health alive
consul_1      |     2016/03/31 06:29:24 [INFO] agent: Synced service '1d625209f296:dockercompose_consul_1:8500'
consul_1      |     2016/03/31 06:29:24 [INFO] agent: Synced service '1d625209f296:dockercompose_consul_1:8300'
consul_1      |     2016/03/31 06:29:24 [INFO] agent: Synced service '1d625209f296:dockercompose_app_1:8003'
consul_1      |     2016/03/31 06:29:24 [INFO] agent: Synced service 'consul'
consul_1      |     2016/03/31 06:29:24 [INFO] agent: Synced service '1d625209f296:dockercompose_lb_1:80'
consul_1      |     2016/03/31 06:29:24 [INFO] agent: Synced service '1d625209f296:dockercompose_consul_1:53:udp'
consul_1      |     2016/03/31 06:29:24 [INFO] agent: Synced service '1d625209f296:dockercompose_consul_1:8400'
app_1         | Listening on 0.0.0.0:8003
app_1         | process.env.VCAP_APP_PORT undefined
app_1         | process.env.VCAP_APP_HOST undefined
